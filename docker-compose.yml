services:
  # All-in-one ROS2 workspace with Gazebo, Nav2, and ML dependencies
  btgencobot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: btgencobot
    hostname: btgencobot
    ports:
      - "6080:6080"  # noVNC web interface
      - "5901:5901"  # VNC server
    volumes:
      - ./:/workspace
      - ~/.config/nvim:/root/.config/nvim  # Mount nvim config as read-write
      - nvim-data:/root/.local/share/nvim     # Persist nvim plugins and data
      - nvim-state:/root/.local/state/nvim    # Persist nvim state
    environment:
      - ROS_DOMAIN_ID=42
      - DISPLAY=:1
      - RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
    stdin_open: true
    tty: true
    command: /bin/bash

# Named volumes for nvim data persistence
volumes:
  nvim-data:
  nvim-state:

